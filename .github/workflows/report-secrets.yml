name: Report Repository Secrets

on:
  push:
    branches:
      - chore/day1-boot
  workflow_dispatch:

jobs:
  report:
    runs-on: ubuntu-latest
    permissions:
      actions: read
      issues: write
    steps:
      - name: Report secrets list
        uses: actions/github-script@v7
        with:
          script: |
            const secrets = await github.rest.actions.listRepoSecrets({
              owner: context.repo.owner,
              repo: context.repo.repo
            });

            const names = secrets.data.secrets.map(secret => secret.name).join(', ');

            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: 2,
              body: `Repository secrets present: ${names}`
            });
